{"ast":null,"code":"import _regeneratorRuntime from\"/home/adbuls/social-media-app-MERN-master/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/adbuls/social-media-app-MERN-master/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/adbuls/social-media-app-MERN-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,useEffect,useRef}from\"react\";import React,{useState}from'react';import CardHeader from'@material-ui/core/CardHeader';import TextField from'@material-ui/core/TextField';import Avatar from'@material-ui/core/Avatar';import Icon from'@material-ui/core/Icon';import PropTypes from'prop-types';import axios from\"axios\";import{withStyles}from'@material-ui/core/styles';import{Link}from'react-router-dom';import{AuthContext}from\"../../context/AuthContext\";import{styles}from'./commentStyle';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function commentSA(_ref){var props=_ref.props,classes=_ref.classes;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var desc=useRef();var _useContext=useContext(AuthContext),currentUser=_useContext.user;var handleChange=function handleChange(event){setText(event.target.value);};// submit a comment\nvar submitHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var newComment;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();newComment={userId:currentUser._id,desc:desc.current.value};_context.prev=2;_context.next=5;return axios.put(\"/posts\"+props.postId+\"/comment\",{userId:currentUser._id});case 5:// refresh the page after posting something\nwindow.location.reload();_context.next=10;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](2);case 10:case\"end\":return _context.stop();}},_callee,null,[[2,8]]);}));return function submitHandler(_x){return _ref2.apply(this,arguments);};}();/*const deleteComment = comment => event => {\n    uncomment({\n      userId: jwt.user._id\n    }, {\n      t: jwt.token\n    }, props.postId, comment).then((data) => {\n      if (data.error) {\n        console.log(data.error)\n      } else {\n        props.updateComments(data.comments)\n      }\n    })\n  }*/var commentBody=function commentBody(item){return/*#__PURE__*/_jsxs(\"p\",{className:classes.commentText,children:[/*#__PURE__*/_jsx(Link,{to:\"/user/\"+item.postedBy._id,children:item.postedBy.name}),/*#__PURE__*/_jsx(\"br\",{}),item.text,/*#__PURE__*/_jsxs(\"span\",{className:classes.commentDate,children:[new Date(item.created).toDateString(),\" |\",currentUser._id===item.postedBy._id&&/*#__PURE__*/_jsx(Icon,{className:classes.commentDelete,children:\"delete\"})]})]});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CardHeader,{avatar:/*#__PURE__*/_jsx(Avatar,{className:classes.smallAvatar,src:'/api/users/photo/'+currentUser._id}),title:/*#__PURE__*/_jsx(TextField,{onKeyDown:submitHandler,multiline:true,value:text,onChange:handleChange,placeholder:\"Write something ...\",className:classes.commentField,margin:\"normal\"}),className:classes.cardHeader}),props.comments.map(function(item,i){return/*#__PURE__*/_jsx(CardHeader,{avatar:/*#__PURE__*/_jsx(Avatar,{className:classes.smallAvatar,src:'/api/users/photo/'+item.postedBy._id}),title:commentBody(item),className:classes.cardHeader},i);})]});}Comments.propTypes={postId:PropTypes.string.isRequired,comments:PropTypes.array.isRequired,updateComments:PropTypes.func.isRequired};export default withStyles(styles)(Comments);","map":{"version":3,"names":["useContext","useEffect","useRef","React","useState","CardHeader","TextField","Avatar","Icon","PropTypes","axios","withStyles","Link","AuthContext","styles","jsx","_jsx","jsxs","_jsxs","commentSA","_ref","props","classes","_useState","_useState2","_slicedToArray","text","setText","desc","_useContext","currentUser","user","handleChange","event","target","value","submitHandler","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","newComment","wrap","_callee$","_context","prev","next","preventDefault","userId","_id","current","put","postId","window","location","reload","t0","stop","_x","apply","arguments","commentBody","item","className","commentText","children","to","postedBy","name","commentDate","Date","created","toDateString","commentDelete","avatar","smallAvatar","src","title","onKeyDown","multiline","onChange","placeholder","commentField","margin","cardHeader","comments","map","i","Comments","propTypes","string","isRequired","array","updateComments","func"],"sources":["/home/adbuls/social-media-app-MERN-master/client/src/components/comment/commentSA.js"],"sourcesContent":["import {useContext, useEffect, useRef } from \"react\";\nimport React, {useState} from 'react'\nimport CardHeader from '@material-ui/core/CardHeader'\nimport TextField from '@material-ui/core/TextField'\nimport Avatar from '@material-ui/core/Avatar'\nimport Icon from '@material-ui/core/Icon'\nimport PropTypes from 'prop-types'\nimport axios from \"axios\"\nimport { withStyles } from '@material-ui/core/styles';\nimport {Link} from 'react-router-dom'\nimport { AuthContext } from \"../../context/AuthContext\";\nimport {styles} from './commentStyle'\n\n\nfunction commentSA ({props, classes}) {\n  const [text, setText] = useState('')\n  const desc = useRef();\n  const { user: currentUser } = useContext(AuthContext);\n\n  const handleChange = event => {\n    setText(event.target.value)\n  }\n  \n  // submit a comment\n  const submitHandler = async (e) => {\n    e.preventDefault();\n    const newComment = {\n      userId: currentUser._id,\n      desc: desc.current.value,\n    };\n    try {\n      await axios.put(\"/posts\"+ props.postId + \"/comment\", { userId: currentUser._id });\n      // refresh the page after posting something\n      window.location.reload();\n    } catch (err) {}\n};\n\n\n  /*const deleteComment = comment => event => {\n    uncomment({\n      userId: jwt.user._id\n    }, {\n      t: jwt.token\n    }, props.postId, comment).then((data) => {\n      if (data.error) {\n        console.log(data.error)\n      } else {\n        props.updateComments(data.comments)\n      }\n    })\n  }*/\n\n    const commentBody = item => {\n      return (\n        <p className={classes.commentText}>\n          <Link to={\"/user/\" + item.postedBy._id}>{item.postedBy.name}</Link><br/>\n          {item.text}\n          <span className={classes.commentDate}>\n            {(new Date(item.created)).toDateString()} |\n            {currentUser._id === item.postedBy._id &&\n              <Icon className={classes.commentDelete}>delete</Icon> }\n          </span>\n        </p>\n      )\n    }\n\n    return (<div>\n        <CardHeader\n              avatar={\n                <Avatar className={classes.smallAvatar} src={'/api/users/photo/'+ currentUser._id}/>}\n              title={ <TextField\n                onKeyDown={submitHandler}\n                multiline\n                value={text}\n                onChange={handleChange}\n                placeholder=\"Write something ...\"\n                className={classes.commentField}\n                margin=\"normal\"\n                />}\n              className={classes.cardHeader}\n        />\n        { props.comments.map((item, i) => {\n            return <CardHeader\n                      avatar={\n                      <Avatar className={classes.smallAvatar} src={'/api/users/photo/'+item.postedBy._id}/>}\n                      title={commentBody(item)}\n                      className={classes.cardHeader}\n                      key={i}/>\n              })\n        }\n    </div>)\n}\n\nComments.propTypes = {\n  postId: PropTypes.string.isRequired,\n  comments: PropTypes.array.isRequired,\n  updateComments: PropTypes.func.isRequired\n}\n\nexport default withStyles(styles)(Comments);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}