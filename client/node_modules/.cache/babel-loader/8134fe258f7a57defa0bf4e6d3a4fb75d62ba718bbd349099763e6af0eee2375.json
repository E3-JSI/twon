{"ast":null,"code":"import _regeneratorRuntime from\"/home/adbuls/social-media-app-MERN-master/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/adbuls/social-media-app-MERN-master/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/adbuls/social-media-app-MERN-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useEffect,useState}from\"react\";import{withStyles}from\"@material-ui/core/styles\";import{styles}from\"./chatOnlineStyle\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ChatOnline(_ref){var classes=_ref.classes,onlineUsers=_ref.onlineUsers,currentId=_ref.currentId,setCurrentChat=_ref.setCurrentChat;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),friends=_useState2[0],setFriends=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),onlineFriends=_useState4[0],setOnlineFriends=_useState4[1];var PF=process.env.REACT_APP_PUBLIC_FOLDER;useEffect(function(){var getFriends=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/users/friends/\"+currentId);case 2:res=_context.sent;setFriends(res.data);case 4:case\"end\":return _context.stop();}},_callee);}));return function getFriends(){return _ref2.apply(this,arguments);};}();getFriends();},[currentId]);useEffect(function(){setOnlineFriends(friends.filter(function(f){return onlineUsers.includes(f._id);}));console.log(onlineFriends);},[friends,onlineUsers]);var handleClick=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(user){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"/conversations/find/\".concat(currentId,\"/\").concat(user._id));case 3:res=_context2.sent;setCurrentChat(res.data);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}));return function handleClick(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:classes.chatOnline,children:onlineFriends.map(function(o){return/*#__PURE__*/_jsxs(\"div\",{className:classes.chatOnlineFriend,onClick:function onClick(){return handleClick(o);},children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.chatOnlineImgContainer,children:[/*#__PURE__*/_jsx(\"img\",{className:classes.chatOnlineImg,src:o!==null&&o!==void 0&&o.profilePicture?PF+o.profilePicture:PF+\"person/noAvatar.png\",alt:\"\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.chatOnlineBadge})]}),/*#__PURE__*/_jsx(\"span\",{className:classes.chatOnlineName,children:o===null||o===void 0?void 0:o.username})]});})});}export default withStyles(styles)(ChatOnline);","map":{"version":3,"names":["axios","useEffect","useState","withStyles","styles","jsx","_jsx","jsxs","_jsxs","ChatOnline","_ref","classes","onlineUsers","currentId","setCurrentChat","_useState","_useState2","_slicedToArray","friends","setFriends","_useState3","_useState4","onlineFriends","setOnlineFriends","PF","process","env","REACT_APP_PUBLIC_FOLDER","getFriends","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","get","sent","data","stop","apply","arguments","filter","f","includes","_id","console","log","handleClick","_ref3","_callee2","user","_callee2$","_context2","concat","t0","_x","className","chatOnline","children","map","o","chatOnlineFriend","onClick","chatOnlineImgContainer","chatOnlineImg","src","profilePicture","alt","chatOnlineBadge","chatOnlineName","username"],"sources":["/home/adbuls/social-media-app-MERN-master/client/src/components/chatOnline/ChatOnline.js"],"sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { styles } from \"./chatOnlineStyle\";\n\nfunction ChatOnline({ classes, onlineUsers, currentId, setCurrentChat }) {\n    const [friends, setFriends] = useState([]);\n    const [onlineFriends, setOnlineFriends] = useState([]);\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER;\n\n    useEffect(() => {\n        const getFriends = async () => {\n            const res = await axios.get(\"/users/friends/\" + currentId);\n            setFriends(res.data);\n        };\n\n        getFriends();\n    }, [currentId]);\n\n    useEffect(() => {\n        setOnlineFriends(friends.filter((f) => onlineUsers.includes(f._id)));\n        console.log(onlineFriends);\n    }, [friends, onlineUsers]);\n\n    const handleClick = async (user) => {\n        try {\n            const res = await axios.get(\n                `/conversations/find/${currentId}/${user._id}`\n            );\n            setCurrentChat(res.data);\n        } catch (err) {\n            console.log(err);\n        }\n    };\n\n    return (\n        <div className={classes.chatOnline}>\n            {onlineFriends.map((o) => (\n                <div\n                    className={classes.chatOnlineFriend}\n                    onClick={() => handleClick(o)}\n                >\n                    <div className={classes.chatOnlineImgContainer}>\n                        <img\n                            className={classes.chatOnlineImg}\n                            src={\n                                o?.profilePicture\n                                    ? PF + o.profilePicture\n                                    : PF + \"person/noAvatar.png\"\n                            }\n                            alt=\"\"\n                        />\n                        <div className={classes.chatOnlineBadge}></div>\n                    </div>\n                    <span className={classes.chatOnlineName}>\n                        {o?.username}\n                    </span>\n                </div>\n            ))}\n        </div>\n    );\n}\n\nexport default withStyles(styles)(ChatOnline);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}