{"ast":null,"code":"import _regeneratorRuntime from\"/home/adbuls/social-media-app-MERN-master/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/adbuls/social-media-app-MERN-master/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/adbuls/social-media-app-MERN-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,useEffect,useState}from\"react\";import{format}from'timeago.js';import{Link}from'react-router-dom';import{AuthContext}from\"../../context/AuthContext\";import axios from\"axios\";import{MoreVert}from'@material-ui/icons';import{withStyles}from'@material-ui/core/styles';import{styles}from'./postStyle';import{TextField}from\"@material-ui/core\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Post(_ref){var post=_ref.post,classes=_ref.classes;var _useState=useState(post.likes.length),_useState2=_slicedToArray(_useState,2),like=_useState2[0],setLike=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLiked=_useState4[0],setIsLiked=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];var _useContext=useContext(AuthContext),currentUser=_useContext.user;var PF=process.env.REACT_APP_PUBLIC_FOLDER;useEffect(function(){setIsLiked(post.likes.includes(currentUser._id));},[currentUser._id,post.likes]);useEffect(function(){var fetchUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/users?userId=\".concat(post.userId));case 2:res=_context.sent;setUser(res.data);case 4:case\"end\":return _context.stop();}},_callee);}));return function fetchUser(){return _ref2.apply(this,arguments);};}();fetchUser();},[post.userId]);var handleChange=function handleChange(name){return function(event){var value=event.target.value;console.log(value);};};var likeHandler=function likeHandler(){try{axios.put(\"/posts/\"+post._id+\"/like\",{userId:currentUser._id});}catch(err){}setLike(isLiked?like-1:like+1);setIsLiked(!isLiked);};return/*#__PURE__*/_jsx(\"div\",{className:classes.post,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.postWrapper,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.postTop,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.postTopLeft,children:[/*#__PURE__*/_jsx(Link,{to:\"profile/\".concat(user.username),children:/*#__PURE__*/_jsx(\"img\",{src:user.profilePicture?PF+user.profilePicture:PF+'person/noAvatar.png',alt:\"\",className:classes.postProfileImg})}),/*#__PURE__*/_jsx(\"span\",{className:classes.postUsername,children:user.username}),/*#__PURE__*/_jsx(\"span\",{className:classes.postDate,children:format(post.createdAt)})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.postTopRight,children:/*#__PURE__*/_jsx(MoreVert,{})})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.postCenter,children:[/*#__PURE__*/_jsx(\"span\",{className:classes.postText,children:post===null||post===void 0?void 0:post.desc}),/*#__PURE__*/_jsx(\"img\",{src:PF+post.img,alt:\"\",className:classes.postImg})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.postBottom,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.postBottomLeft,children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(PF,\"like.png\"),alt:\"\",className:classes.likeIcon,style:{display:\"none\"},onClick:likeHandler}),/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(PF,\"heart.png\"),alt:\"\",className:classes.likeIcon,onClick:likeHandler}),/*#__PURE__*/_jsxs(\"span\",{className:classes.postLikeCounter,children:[like,\" likes\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.postBottomRight,style:{display:\"none\"},children:/*#__PURE__*/_jsxs(\"div\",{className:classes.postCommentText,children:[post.comment,\" comments\"]})})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.postBottom,children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"What's in your mind ?\",className:classes.shareInput})})})]})});}export default withStyles(styles)(Post);","map":{"version":3,"names":["useContext","useEffect","useState","format","Link","AuthContext","axios","MoreVert","withStyles","styles","TextField","jsx","_jsx","jsxs","_jsxs","Post","_ref","post","classes","_useState","likes","length","_useState2","_slicedToArray","like","setLike","_useState3","_useState4","isLiked","setIsLiked","_useState5","_useState6","user","setUser","_useContext","currentUser","PF","process","env","REACT_APP_PUBLIC_FOLDER","includes","_id","fetchUser","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","get","concat","userId","sent","data","stop","apply","arguments","handleChange","name","event","value","target","console","log","likeHandler","put","err","className","children","postWrapper","postTop","postTopLeft","to","username","src","profilePicture","alt","postProfileImg","postUsername","postDate","createdAt","postTopRight","postCenter","postText","desc","img","postImg","postBottom","postBottomLeft","likeIcon","style","display","onClick","postLikeCounter","postBottomRight","postCommentText","comment","placeholder","shareInput"],"sources":["/home/adbuls/social-media-app-MERN-master/client/src/components/post/Post.js"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport { format } from 'timeago.js'\nimport { Link } from 'react-router-dom';\nimport { AuthContext } from \"../../context/AuthContext\";\nimport axios from \"axios\"\nimport {MoreVert} from '@material-ui/icons';\nimport { withStyles } from '@material-ui/core/styles';\nimport {styles} from './postStyle'\nimport { TextField } from \"@material-ui/core\";\n\nfunction Post({post, classes}) {\n    const [like, setLike] = useState(post.likes.length);\n    const [isLiked, setIsLiked] = useState(false);\n    const [user, setUser] = useState({});\n\n    const { user: currentUser } = useContext(AuthContext);\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER;\n\n    useEffect(() => {\n        setIsLiked(post.likes.includes(currentUser._id));\n      }, [currentUser._id, post.likes]);\n      \n    useEffect(() => {\n        const fetchUser = async () => {\n            const res = await axios.get(`/users?userId=${post.userId}`)\n            setUser(res.data);\n        };\n\n        fetchUser();\n    }, [post.userId])\n\n\n    const handleChange = name => event => {\n        const value = event.target.value\n        console.log(value)\n    };\n\n    const likeHandler = () => {\n        try {\n            axios.put(\"/posts/\" + post._id + \"/like\", { userId: currentUser._id });\n        } catch (err) {}\n        setLike(isLiked ? like - 1 : like + 1);\n        setIsLiked(!isLiked);\n    };\n\n\n    return (\n        <div className={classes.post}>\n            <div className={classes.postWrapper}>\n                <div className={classes.postTop}>\n                    <div className={classes.postTopLeft}>\n                        <Link to={`profile/${user.username}`}>\n                            <img src={user.profilePicture ? PF + user.profilePicture : PF+'person/noAvatar.png'} alt=\"\" className={classes.postProfileImg}/>\n                        </Link>\n                        <span className={classes.postUsername}>\n                            { user.username }\n                        </span>\n                        <span className={classes.postDate}>{format(post.createdAt)}</span>\n                    </div>\n                    <div className={classes.postTopRight}>\n                        <MoreVert/>\n                    </div>\n                </div>\n                <div className={classes.postCenter}>\n                    <span className={classes.postText}>{post?.desc}</span>\n                    <img src={PF + post.img} alt=\"\" className={classes.postImg}/>\n                </div>\n                <div className={classes.postBottom}>\n                    <div className={classes.postBottomLeft}>\n                        <img src={`${PF}like.png`} alt=\"\" className={classes.likeIcon}  style={{ display: \"none\" }} onClick={likeHandler} />\n                        <img src={`${PF}heart.png`} alt=\"\" className={classes.likeIcon} onClick={likeHandler} />\n                        <span className={classes.postLikeCounter}>{like} likes</span>\n                    </div>\n                    <div className={classes.postBottomRight} style={{ display: \"none\" }}>\n                        <div className={classes.postCommentText}>{post.comment } comments</div>\n                    </div>\n                </div>\n                <div className={classes.postBottom}>\n                    <div >\n                    <input\n                        placeholder={\"What's in your mind ?\"}\n                        className={classes.shareInput}\n    \n                    />\n                </div>\n                    \n                    \n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default withStyles(styles)(Post);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}