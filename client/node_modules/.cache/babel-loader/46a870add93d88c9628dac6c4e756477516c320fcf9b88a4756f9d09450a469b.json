{"ast":null,"code":"var _jsxFileName = \"/home/adbuls/social-media-app-MERN-master/client/src/components/feed/Feed.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport Post from '../post/Post';\nimport Share from '../share/Share';\nimport axios from \"axios\";\nimport { useContext } from \"react\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport { withStyles } from '@material-ui/core/styles';\nimport { styles } from './feedStyle';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Feed(_ref) {\n  _s();\n  let {\n    username,\n    classes,\n    selectedValue\n  } = _ref;\n  const [posts, setPosts] = useState([]);\n  const {\n    user\n  } = useContext(AuthContext);\n  const [followed, setFollowed] = useState([]\n  //currentUser.followings.includes(user?.id)\n  );\n\n  console.log(\"selected radio avlues\");\n  console.log(selectedValue);\n  const fetchPosts = async () => {\n    console.log(\"fetchpost\");\n    console.log(user.feedValue);\n    var whPosts = \"/posts/timeline/\";\n    if (selectedValue == 0) {\n      whPosts = \"/posts/timeline/\";\n    } else if (selectedValue == 1) {\n      whPosts = \"/posts/onlyFollowers/\";\n    } else if (selectedValue == 2) {\n      whPosts = \"/posts/onlyFollowings/\";\n    }\n    const res = username ? await axios.get(\"/posts/profile/\" + username) : await axios.get(whPosts + user._id);\n    setPosts(res.data.sort((p1, p2) => {\n      return new Date(p2.createdAt) - new Date(p1.createdAt);\n    }));\n  };\n  useEffect(() => {\n    console.log(\"selected radio avlues\");\n    if (selectedValue != 10) {\n      fetchPosts();\n    }\n  }, [username, user._id, selectedValue]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.feed,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.feedWrapper,\n      children: [(!username || username === user.username) && /*#__PURE__*/_jsxDEV(Share, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 64\n      }, this), posts.map(p => {\n        return /*#__PURE__*/_jsxDEV(Post, {\n          post: p\n        }, p._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 28\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n}\n_s(Feed, \"i6cD/8O0ln6wBuKLZqkcoO4+z54=\");\n_c = Feed;\nexport default withStyles(styles)(Feed);\nvar _c;\n$RefreshReg$(_c, \"Feed\");","map":{"version":3,"names":["useState","useEffect","Post","Share","axios","useContext","AuthContext","withStyles","styles","jsxDEV","_jsxDEV","Feed","_ref","_s","username","classes","selectedValue","posts","setPosts","user","followed","setFollowed","console","log","fetchPosts","feedValue","whPosts","res","get","_id","data","sort","p1","p2","Date","createdAt","className","feed","children","feedWrapper","fileName","_jsxFileName","lineNumber","columnNumber","map","p","post","_c","$RefreshReg$"],"sources":["/home/adbuls/social-media-app-MERN-master/client/src/components/feed/Feed.js"],"sourcesContent":["import {useState, useEffect} from 'react'\nimport Post from '../post/Post'\nimport Share from '../share/Share'\nimport axios from \"axios\"\nimport { useContext } from \"react\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport { withStyles } from '@material-ui/core/styles';\nimport {styles} from './feedStyle'\n\nfunction Feed({username, classes, selectedValue}) {\n    const [posts, setPosts] = useState([]);\n    const {user} = useContext(AuthContext);\n    const [followed, setFollowed] = useState([]\n        //currentUser.followings.includes(user?.id)\n      );\n\n      console.log(\"selected radio avlues\");\n      console.log(selectedValue);\n      \n\n      const fetchPosts = async () => {\n\n        console.log(\"fetchpost\")\n        console.log(user.feedValue)\n        var whPosts = \"/posts/timeline/\";\n\n        if(selectedValue == 0){\n            whPosts = \"/posts/timeline/\"\n        }\n        else if (selectedValue == 1){\n            whPosts = \"/posts/onlyFollowers/\"\n        }\n        else if (selectedValue == 2){\n            whPosts = \"/posts/onlyFollowings/\"\n        }\n\n        const res = username \n            ?  await axios.get(\"/posts/profile/\" + username)\n            : await axios.get(whPosts + user._id);\n          setPosts(res.data.sort((p1,p2) => {\n              return new Date(p2.createdAt) - new Date(p1.createdAt);\n          })); \n    };\n\n    useEffect(() => {\n        console.log(\"selected radio avlues\")\n        if (selectedValue !=10){\n         fetchPosts();\n        }\n    }, [username, user._id, selectedValue])\n\n    return (\n        <div className={classes.feed}>\n            <div className={classes.feedWrapper}>\n                {( !username || username === user.username) && <Share/> }\n                {posts.map((p) => {\n                    return <Post key={p._id} post={p}/>\n                })}\n            </div>\n        </div>\n    )\n}\n\nexport default withStyles(styles)(Feed);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}