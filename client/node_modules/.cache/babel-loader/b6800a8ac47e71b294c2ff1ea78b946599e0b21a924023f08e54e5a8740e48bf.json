{"ast":null,"code":"import _regeneratorRuntime from\"/home/adbuls/social-media-app-MERN-master/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/adbuls/social-media-app-MERN-master/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/adbuls/social-media-app-MERN-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{PermMedia,Label,Room,EmojiEmotions,Cancel,Height}from'@material-ui/icons';import{useContext,useRef,useState}from\"react\";import{AuthContext}from\"../../context/AuthContext\";import axios from\"axios\";import{withStyles}from'@material-ui/core/styles';import{styles}from'./shareStyle';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Share(_ref){var classes=_ref.classes;var _useContext=useContext(AuthContext),user=_useContext.user;var PF=process.env.REACT_APP_PUBLIC_FOLDER;var desc=useRef();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];// submit a post\nvar submitHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var newPost,data,fileName;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();newPost={userId:user._id,desc:desc.current.value};if(!file){_context.next=16;break;}data=new FormData();fileName=Date.now()+file.name;data.append(\"name\",fileName);data.append(\"file\",file);newPost.img=fileName;console.log(newPost);_context.prev=9;_context.next=12;return axios.post(\"/upload\",data);case 12:_context.next=16;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](9);case 16:_context.prev=16;_context.next=19;return axios.post(\"/posts\",newPost);case 19:// refresh the page after posting something\nwindow.location.reload();_context.next=24;break;case 22:_context.prev=22;_context.t1=_context[\"catch\"](16);case 24:case\"end\":return _context.stop();}},_callee,null,[[9,14],[16,22]]);}));return function submitHandler(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:classes.share,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.shareWrapper,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.shareTop,children:[/*#__PURE__*/_jsx(\"img\",{className:classes.shareProfileImg,src:user.profilePicture?PF+user.profilePicture:PF+\"person/noAvatar.png\",alt:\"\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"What's in your mind \"+user.username+\"?\",className:classes.shareInput,ref:desc})]}),/*#__PURE__*/_jsx(\"hr\",{className:classes.shareHr}),file&&/*#__PURE__*/_jsxs(\"div\",{className:classes.shareImgContainer,children:[/*#__PURE__*/_jsx(\"img\",{className:classes.shareImg,src:URL.createObjectURL(file),alt:\"\"}),/*#__PURE__*/_jsx(Cancel,{className:classes.shareCancelImg,onClick:function onClick(){return setFile(null);}})]}),/*#__PURE__*/_jsxs(\"form\",{className:classes.shareBottom,onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.shareOptions,style:{height:\"0px\"},children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"file\",className:classes.shareOption,children:[/*#__PURE__*/_jsx(PermMedia,{htmlColor:\"tomato\",className:classes.shareIcon,style:{display:\"none\"}}),/*#__PURE__*/_jsx(\"span\",{className:classes.shareOptionText,style:{display:\"none\"},children:\"Photo or Video\"}),/*#__PURE__*/_jsx(\"input\",{style:{display:\"none\"},type:\"file\",id:\"file\",accept:\".png,.jpeg,.jpg\",onChange:function onChange(e){return setFile(e.target.files[0]);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.shareOption,style:{display:\"none\"},children:[/*#__PURE__*/_jsx(Label,{htmlColor:\"blue\",className:classes.shareIcon}),/*#__PURE__*/_jsx(\"span\",{className:classes.shareOptionText,children:\"Tag\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.shareOption,style:{display:\"none\"},children:[/*#__PURE__*/_jsx(Room,{className:classes.shareIcon}),/*#__PURE__*/_jsx(\"span\",{className:classes.shareOptionText,children:\"Location\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.shareOption,style:{display:\"none\"},children:[/*#__PURE__*/_jsx(EmojiEmotions,{htmlColor:\"goldenrod\",className:classes.shareIcon}),/*#__PURE__*/_jsx(\"span\",{className:classes.shareOptionText,children:\"Feelings\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:classes.shareButton,style:{align:\"right\"},type:\"submit\",children:\"Share\"})]})]})});}export default withStyles(styles)(Share);","map":{"version":3,"names":["PermMedia","Label","Room","EmojiEmotions","Cancel","Height","useContext","useRef","useState","AuthContext","axios","withStyles","styles","jsx","_jsx","jsxs","_jsxs","Share","_ref","classes","_useContext","user","PF","process","env","REACT_APP_PUBLIC_FOLDER","desc","_useState","_useState2","_slicedToArray","file","setFile","submitHandler","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","newPost","data","fileName","wrap","_callee$","_context","prev","next","preventDefault","userId","_id","current","value","FormData","Date","now","name","append","img","console","log","post","t0","window","location","reload","t1","stop","_x","apply","arguments","className","share","children","shareWrapper","shareTop","shareProfileImg","src","profilePicture","alt","placeholder","username","shareInput","ref","shareHr","shareImgContainer","shareImg","URL","createObjectURL","shareCancelImg","onClick","shareBottom","onSubmit","shareOptions","style","height","htmlFor","shareOption","htmlColor","shareIcon","display","shareOptionText","type","id","accept","onChange","target","files","shareButton","align"],"sources":["/home/adbuls/social-media-app-MERN-master/client/src/components/share/Share.js"],"sourcesContent":["import { PermMedia, Label, Room, EmojiEmotions, Cancel, Height } from '@material-ui/icons';\nimport { useContext, useRef, useState } from \"react\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport axios from \"axios\";\nimport { withStyles } from '@material-ui/core/styles';\nimport {styles} from './shareStyle';\n\nfunction Share({classes}) {\n    const { user } = useContext(AuthContext);\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER;\n    const desc = useRef();\n    const [file, setFile] = useState(null);\n\n    // submit a post\n    const submitHandler = async (e) => {\n        e.preventDefault();\n        const newPost = {\n          userId: user._id,\n          desc: desc.current.value,\n        };\n        if (file) {\n          const data = new FormData();\n          const fileName = Date.now() + file.name;\n          data.append(\"name\", fileName);\n          data.append(\"file\", file);\n          newPost.img = fileName;\n          console.log(newPost);\n          try {\n            await axios.post(\"/upload\", data);\n          } catch (err) {}\n        }\n        try {\n          await axios.post(\"/posts\", newPost);\n\n          // refresh the page after posting something\n          window.location.reload();\n\n        } catch (err) {}\n    };\n\n    return (\n        <div className={classes.share}>\n            <div className={classes.shareWrapper}>\n                <div className={classes.shareTop}>\n                    <img\n                        className={classes.shareProfileImg}\n                        src={\n                        user.profilePicture\n                            ? PF + user.profilePicture\n                            : PF + \"person/noAvatar.png\"\n                        }\n                        alt=\"\"\n                    />\n                    <input\n                        placeholder={\"What's in your mind \" + user.username + \"?\"}\n                        className={classes.shareInput}\n                        ref={desc}\n                    />\n                </div>\n                <hr className={classes.shareHr}/>\n                {file && (\n                    <div className={classes.shareImgContainer}>\n                        <img className={classes.shareImg} src={URL.createObjectURL(file)} alt=\"\" />\n                        <Cancel className={classes.shareCancelImg} onClick={() => setFile(null)} />\n                    </div>\n                )}\n                <form className={classes.shareBottom} onSubmit={submitHandler}>\n                    <div className={classes.shareOptions} style={{ height: \"0px\"}}>\n                        <label htmlFor=\"file\" className={classes.shareOption}>\n                            <PermMedia htmlColor=\"tomato\" className={classes.shareIcon} style={{ display: \"none\" }}/>\n                            <span className={classes.shareOptionText} style={{ display: \"none\" }}>Photo or Video</span>\n                            <input\n                                style={{ display: \"none\" }}\n                                type=\"file\"\n                                id=\"file\"\n                                accept=\".png,.jpeg,.jpg\"\n                                onChange={(e) => setFile(e.target.files[0])}\n                            />\n                        </label>\n                        <div className={classes.shareOption} style={{ display: \"none\" }}>\n                            <Label htmlColor=\"blue\" className={classes.shareIcon}/>\n                            <span className={classes.shareOptionText}>Tag</span>\n                        </div>\n                        <div className={classes.shareOption} style={{ display: \"none\" }}>\n                            <Room  className={classes.shareIcon}/>\n                            <span className={classes.shareOptionText}>Location</span>\n                        </div>\n                        <div className={classes.shareOption} style={{ display: \"none\" }}>\n                            <EmojiEmotions htmlColor=\"goldenrod\" className={classes.shareIcon}/>\n                            <span className={classes.shareOptionText}>Feelings</span>\n                        </div>\n                    </div>\n                    <button className={classes.shareButton} style={{ align: \"right\" }} type=\"submit\">Share</button>\n                </form>\n            </div>\n        </div>\n    )\n}\n\nexport default withStyles(styles)(Share);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}