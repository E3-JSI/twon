{"ast":null,"code":"import _regeneratorRuntime from\"/home/adbuls/social-media-app-MERN-master/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/adbuls/social-media-app-MERN-master/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/adbuls/social-media-app-MERN-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import Post from'../post/Post';import Share from'../share/Share';import axios from\"axios\";import{useContext}from\"react\";import{AuthContext}from\"../../context/AuthContext\";import{withStyles}from'@material-ui/core/styles';import{styles}from'./feedStyle';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Feed(_ref){var username=_ref.username,classes=_ref.classes,selectedValue=_ref.selectedValue;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useContext=useContext(AuthContext),user=_useContext.user;var _useState3=useState([]//currentUser.followings.includes(user?.id)\n),_useState4=_slicedToArray(_useState3,2),followed=_useState4[0],setFollowed=_useState4[1];console.log(\"selected radio avlues\");console.log(selectedValue);var fetchPosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var whPosts,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:console.log(\"fetchpost\");console.log(user.feedValue);whPosts=\"/posts/timeline/\";if(selectedValue==0){whPosts=\"/posts/timeline/\";}else if(selectedValue==1){whPosts=\"/posts/onlyFollowers/\";}else if(selectedValue==2){whPosts=\"/posts/onlyFollowings/\";}if(!username){_context.next=10;break;}_context.next=7;return axios.get(\"/posts/profile/\"+username);case 7:_context.t0=_context.sent;_context.next=13;break;case 10:_context.next=12;return axios.get(whPosts+user._id);case 12:_context.t0=_context.sent;case 13:res=_context.t0;setPosts(res.data.sort(function(p1,p2){return new Date(p2.createdAt)-new Date(p1.createdAt);}));case 15:case\"end\":return _context.stop();}},_callee);}));return function fetchPosts(){return _ref2.apply(this,arguments);};}();useEffect(function(){console.log(\"selected radio avlues\");if(selectedValue!=10){fetchPosts();}},[username,user._id,selectedValue]);return/*#__PURE__*/_jsx(\"div\",{className:classes.feed,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.feedWrapper,children:[(!username||username===user.username)&&/*#__PURE__*/_jsx(Share,{}),posts.map(function(p){return/*#__PURE__*/_jsx(Post,{post:p},p._id);})]})});}export default withStyles(styles)(Feed);","map":{"version":3,"names":["useState","useEffect","Post","Share","axios","useContext","AuthContext","withStyles","styles","jsx","_jsx","jsxs","_jsxs","Feed","_ref","username","classes","selectedValue","_useState","_useState2","_slicedToArray","posts","setPosts","_useContext","user","_useState3","_useState4","followed","setFollowed","console","log","fetchPosts","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","whPosts","res","wrap","_callee$","_context","prev","next","feedValue","get","t0","sent","_id","data","sort","p1","p2","Date","createdAt","stop","apply","arguments","className","feed","children","feedWrapper","map","p","post"],"sources":["/home/adbuls/social-media-app-MERN-master/client/src/components/feed/Feed.js"],"sourcesContent":["import {useState, useEffect} from 'react'\nimport Post from '../post/Post'\nimport Share from '../share/Share'\nimport axios from \"axios\"\nimport { useContext } from \"react\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport { withStyles } from '@material-ui/core/styles';\nimport {styles} from './feedStyle'\n\nfunction Feed({username, classes, selectedValue}) {\n    const [posts, setPosts] = useState([]);\n    const {user} = useContext(AuthContext);\n    const [followed, setFollowed] = useState([]\n        //currentUser.followings.includes(user?.id)\n      );\n\n      console.log(\"selected radio avlues\");\n      console.log(selectedValue);\n      \n\n      const fetchPosts = async () => {\n\n        console.log(\"fetchpost\")\n        console.log(user.feedValue)\n        var whPosts = \"/posts/timeline/\";\n\n        if(selectedValue == 0){\n            whPosts = \"/posts/timeline/\"\n        }\n        else if (selectedValue == 1){\n            whPosts = \"/posts/onlyFollowers/\"\n        }\n        else if (selectedValue == 2){\n            whPosts = \"/posts/onlyFollowings/\"\n        }\n\n        const res = username \n            ?  await axios.get(\"/posts/profile/\" + username)\n            : await axios.get(whPosts + user._id);\n          setPosts(res.data.sort((p1,p2) => {\n              return new Date(p2.createdAt) - new Date(p1.createdAt);\n          })); \n    };\n\n    useEffect(() => {\n        console.log(\"selected radio avlues\")\n        if (selectedValue !=10){\n         fetchPosts();\n        }\n    }, [username, user._id, selectedValue])\n\n    return (\n        <div className={classes.feed}>\n            <div className={classes.feedWrapper}>\n                {( !username || username === user.username) && <Share/> }\n                {posts.map((p) => {\n                    return <Post key={p._id} post={p}/>\n                })}\n            </div>\n        </div>\n    )\n}\n\nexport default withStyles(styles)(Feed);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}